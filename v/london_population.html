<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>London Population</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">
  <link rel="stylesheet" href="assets/style.css">
  <link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/default.min.css' rel='stylesheet'/>
  <script src='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js'></script>
  <script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
  <div class="container">
    <h1>London Population</h1>
    <div id="visualization"></div>
    <div id="code">
      <h1>Code</h1>
      <pre><code>require "opal"
require "opal-d3"
require "data/london_population"

svg = D3.select("#visualization")
        .append("svg")
        .attr("height", "400px")
        .attr("width", "100%")

svg.append("g").select_all("rect")
   .data(LondonPopulation)
   .enter().append("rect")
     .attr("width", 30)
     .attr("height"){|d| d.greater/100_000 }
     .attr("y"){|d| 200 - d.greater/100_000 }
     .attr("x"){|d| (d.year-1800)*4 }
     .attr("fill", "pink")

svg.append("g").select_all("rect")
  .data(LondonPopulation)
  .enter().append("rect")
    .attr("width", 30)
    .attr("height"){|d| d.inner/100_000 }
    .attr("y"){|d| 200 - d.inner/100_000 }
    .attr("x"){|d| (d.year-1800)*4 }
    .attr("fill", "steelblue")

svg.append("g").select_all("circle")
   .data(LondonPopulation)
   .enter().append("circle")
     .attr("fill", "pink")
     .attr("cx"){|d| 15 + (d.year-1800)*4 }
     .attr("cy", 300)
     .attr("r"){|d| (d.greater**0.5)/150.0 }

svg.append("g").select_all("circle")
  .data(LondonPopulation)
  .enter().append("circle")
    .attr("fill", "steelblue")
    .attr("cx"){|d| 15 + (d.year-1800)*4 }
    .attr("cy", 300)
    .attr("r"){|d| (d.inner**0.5)/150.0 }

list = D3.select("#visualization").append("table")
list.append("tr").append("td").text("Outer London").style("background", "pink")
list.append("tr").append("td").text("Inner London").style("background", "steelblue")
</code></pre>
    </div>
    <script src="../assets/d3.js"></script>
    <script src="../assets/london_population.js"></script>
    <script>
      window.onload = function() { Opal.load("london_population"); }
    </script>
  </div>
</body>
</html>
