<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Elections 2016</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/style.css">
  <link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/default.min.css' rel='stylesheet'/>
  <script src='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js'></script>
  <script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
  <div class="container">
    <h1>Elections 2016</h1>
    <div id="visualization"></div>
    <div id="code">
      <h1>Code</h1>
      <pre><code>require "opal"
require "opal-d3"
require "data/elections_2016"

list = D3.select("#visualization").append("ul")
max_votes = Elections2016.map(&:votes).max

Elections2016.each do |candidate|
  item = list.append("li")
    .style("position", "relative")
  item.append("span")
    .style("background-color", candidate.color)
    .style("position", "absolute")
    .style("width", "#{100.0 * candidate.votes / max_votes}%")
    .style("height", "100%")
  item.append("span")
    .style("position", "absolute")
    .text("#{candidate.name} - #{candidate.votes} votes")
end
</code></pre>
    </div>
    <script src="/assets/d3.js"></script>
    <script src="/assets/elections_2016.js"></script>
    <script>
      window.onload = function() { Opal.load("elections_2016"); }
    </script>
  </div>
</body>
</html>
